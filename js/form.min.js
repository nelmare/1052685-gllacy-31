const button=document.querySelector(".contacts-button"),buttonClose=document.querySelector(".modal-close-button"),modal=document.querySelector(".modal-wrapper"),form=document.querySelector(".feedback-form"),name=form.querySelector("[name=name]"),email=form.querySelector("[name=email]"),feedback=form.querySelector("[name=feedback]");let isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}button.addEventListener("click",function(e){e.preventDefault(),modal.classList.add("modal-show"),storageName&&storageEmail?(name.value=storageName,email.value=storageEmail,feedback.focus()):name.focus()}),buttonClose.addEventListener("click",function(e){e.preventDefault(),modal.classList.remove("modal-show"),form.classList.remove("form-error")}),form.addEventListener("submit",function(e){name.value&&email.value&&feedback.value?isStorageSupport&&(localStorage.setItem("name",name.value),localStorage.setItem("email",email.value)):(e.preventDefault(),form.classList.remove("form-error"),form.offsetWidth=form.offsetWidth,form.classList.add("form-error"))}),window.addEventListener("keydown",function(e){"Esc"!==e.key&&"Escape"!==e.key||(e.preventDefault(),modal.classList.contains("modal-show")&&(modal.classList.remove("modal-show"),form.classList.remove("form-error")))});
